# Process Design Document (PDD) - Working Draft
**Team Name:** Group 2
**Project Title:** Personal Networking Outreach Assistant 
**Current Phase:** Week 4 (Advanced Logic Design)

---

## Part 1: Process Mapping (The "As-Is" State)

#### https://github.com/msacouto-ffld/data6900-group-project/blob/main/milestone-1/pdd-v2.md
---
## [Part 2: The Core Capability (The Linear Worker)]
#### https://github.com/msacouto-ffld/data6900-group-project/blob/main/milestone-2/MVW.md
---

## Part 3: The Intelligent Network (Week 4 Additions)

*In Week 4, we wrap the Linear Core in advanced logic to handle variety (Routing) and quality (Looping).*

### 3.1 The Architecture Strategy
*Which Advanced Patterns are you deploying to fix the "Real World Complexity"? Check at least one.*
*   [X] **The Router (Branching):** To handle different types of inputs (e.g., separating Spam from Valid Requests).
*   [X] **The Evaluator-Optimizer (Looping):** To ensure quality/safety (e.g., checking the Draft before sending).
*   [ ] **The Orchestrator-Workers (Parallel):** To handle complex, multi-step research.

### 3.2 The Advanced Logic Map (Mermaid)
*(Update your diagram. It should now contain Diamonds (Decisions) or Circles (Loops) wrapping around your nodes.)*

```mermaid
flowchart TD

    %% â”€â”€ ENTRY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    START([âš¡ Job Posting]) --> B1

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% STEP B â€” Identify Company + Job Title + Background
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    B1["ğŸ¤– B1 Gatekeeper: Structured Job Extraction"]
    B1 --> B2["âš–ï¸ B2 Judge: Search Parameter Reasoning"]

    B2 --> B_CRITIC["ğŸ” B2 Critic: Title Realism + Anchor Discipline Audit"]
    B_CRITIC --> B_LOOP{"Are titles market-realistic AND is the primary company anchor dominant?"}

    B_LOOP -- "No: Rare titles / Anchor drift / Over-broad scope" --> B2
    B_LOOP -- "Yes: Realistic titles + Clear primary anchor" --> B_ROUTER{"Does the job include a strong company signal AND a valid university match?"}

    B_ROUTER -- "Yes: Strong anchor signals present" --> B3_A["âœï¸ B3 Worker: Anchor-First Query - Company Locked + Standard Titles"]
    B_ROUTER -- "No: Weak anchor signals" --> B3_B["âœï¸ B3 Worker: Skill-Weighted Query - Standard Titles + Core Skills"]

    B3_A --> C1
    B3_B --> C1

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% STEP C â€” Analyze Profiles for Relevance
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    C1["ğŸ¤– C1 Gatekeeper: Profile Extraction - Strictly Profile-Bound"]
    C1 --> C_ROUTER{"Are core fields present (Name, Role, Company) AND no hallucinated or excessive tools?"}

    C_ROUTER -- "No: Missing data / Tool over-extraction" --> C1_FALLBACK["ğŸ”„ C1 Fallback: Re-Extract with Null Enforcement + Tool Filtering"]
    C1_FALLBACK --> C2
    C_ROUTER -- "Yes: Clean structured JSON" --> C2

    C2["âš–ï¸ C2 Judge: Calibrated Relevance Scoring"]

    C2 --> C_CRITIC["ğŸ” C2 Critic: Precision Threshold + Inflation Check"]
    C_CRITIC --> C_LOOP{"Is High tier reserved for strong multi-signal alignment?"}

    C_LOOP -- "No: Over-assigned High / Flat tiering" --> C2
    C_LOOP -- "Yes: Clear tier separation + ranking" --> C3["âœï¸ C3 Worker: Structured Lead Summary - Core Competency separated from Tools"]

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% STEP D â€” Draft Customized Message
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    C3 --> D_ROUTER{"Are strong personalization anchors identified (role match, company match, skill overlap)?"}

    D_ROUTER -- "No: Weak or generic anchors selected" --> D1_FALLBACK["ğŸ”„ D1 Fallback: Re-rank anchors by signal strength"]
    D_ROUTER -- "Yes: High-signal anchors confirmed" --> D2

    D1_FALLBACK --> D2

    D2["âš–ï¸ D2 Judge: Personalization Strategy - Tone + Priority Order"]
    D2 --> D3["âœï¸ D3 Worker: Draft Message"]

    D3 --> D_CRITIC["ğŸ” D3 Critic: Tone Calibration + Length + Explicit CTA Audit"]
    D_CRITIC --> D_LOOP{"Professional tone AND concise length AND clear actionable ask with timeline?"}

    D_LOOP -- "No: Overconfident / Too long / No clear ask" --> D3
    D_LOOP -- "Yes: Calibrated tone + Specific CTA" --> HUMAN

    %% â”€â”€ EXIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    HUMAN(["ğŸ› ï¸ Human Review & Send"])

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% STYLING
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    %% Week 3 nodes â€” Orange
    style B1 fill:#FFF4DD,stroke:#E0C070
    style B2 fill:#FFF4DD,stroke:#E0C070
    style B3_A fill:#FFF4DD,stroke:#E0C070
    style B3_B fill:#FFF4DD,stroke:#E0C070
    style C1 fill:#FFF4DD,stroke:#E0C070
    style C2 fill:#FFF4DD,stroke:#E0C070
    style C3 fill:#FFF4DD,stroke:#E0C070
    style D2 fill:#FFF4DD,stroke:#E0C070
    style D3 fill:#FFF4DD,stroke:#E0C070

    %% Router nodes â€” Green
    style B_ROUTER fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px
    style C_ROUTER fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px
    style D_ROUTER fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px

    %% Critic nodes â€” Green
    style B_CRITIC fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px
    style C_CRITIC fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px
    style D_CRITIC fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px

    %% Fallback nodes â€” Green
    style C1_FALLBACK fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px
    style D1_FALLBACK fill:#E6FFFA,stroke:#2C7A7B,stroke-width:2px
```

### 3.3 The Orchestrator Logic
*Define the step-by-step execution plan (The "Operating System"). This replaces the simple "1-2-3" sequence.*

#### WORKFLOW VARIABLES
```
# Inputs


# Gatekeeper outputs


# Judge outputs


# Critic outputs

```

#### WORKFLOW CONDITIONS
##### Router (Pre-Gatekeeper)
```

```

##### Critic (Post-Judge Evaluator Loop)
```
# Initialize loop


    # Feedback to Judge
    
```

---

### 3.4 New Component Definitions (The Modules)

#### Module 1: B2 Critic â€” Title Realism + Anchor Discipline Audit

This is the highest-leverage control point in the system (prevents unrealistic titles + anchor drift).

**Purpose**

Ensure that the Judge (Step B) produces:

Market-realistic LinkedIn titles

A dominant primary company anchor

No secondary-company dilution

No creative/novel title invention

This node prevents:

Rare titles

Anchor dilution

Query drift

Downstream precision collapse

**Input Variable**

    {judge_verdict_xml}

    Specifically:

    - <verdict> section containing:

    - Target companies

    - Target job titles

    - Target skills

**Output Categories**

The Critic returns:

    - VALID

    - REVISE_TITLES (rare/unrealistic titles detected)

    - REVISE_ANCHOR (primary company not dominant)

    - REVISE_SCOPE (too many companies or over-broad strategy)

**Evaluation Rubric (Derived from SCRATCH_PAD Failures)**

The Critic must enforce:

**Rule 1 â€” Title Realism**

Reject if:

- Titles contain uncommon phrasing (e.g., â€œConversational AI Leadâ€)

- Titles exceed 5 variants

- Titles are creative combinations not standard in LinkedIn autocomplete

Acceptable examples:

- Data Scientist

- Senior Data Scientist

- Applied Scientist

- Product Data Scientist

- AI Product Manager

**Rule 2 â€” Anchor Discipline**

Reject if:

- More than one company is in the primary search logic

- Secondary companies are presented as OR-equivalent to the primary

- Company anchor is optional instead of dominant

**Rule 3 â€” Scope Control**

Reject if:

- More than 3â€“5 titles

- More than 1 primary company

- Skills exceed realistic LinkedIn keyword density

```
#### Role
You are a Quality Control Critic for LinkedIn Search Strategy.

#### Audience
Machine (Decision Node for Looping)

#### Format
JSON:
{
  "status": "",
  "reason": "",
  "action": ""
}

#### Task
You will receive a Judge verdict that defines:
- Target companies
- Target job titles
- Target skills

Evaluate the strategy using the following rubric:

1. Title Realism
- Titles must be common LinkedIn titles.
- Reject invented, rare, or overly creative titles.
- Max 5 titles allowed.

2. Anchor Discipline
- One dominant primary company only.
- No OR-combined secondary companies.
- The company anchor must not be diluted.

3. Scope Control
- No excessive titles or keyword sprawl.

Return:

status:
- VALID
- REVISE_TITLES
- REVISE_ANCHOR
- REVISE_SCOPE

reason:
Short explanation of violation.

action:
Clear instruction to Judge for revision.

```
RAFT Prompt:
#### Role
Router AI: Field Integrity Validator for Message Drafting Input

#### Audience
Machine (routing decision only â€” no human output)

#### Format
JSON:
{
  "status": "VALID" | "CORRUPTED" | "INCOMPLETE",
  "failed_fields": [] | ["skills", "interests", ...],
  "reason": ""
}

#### Task
- Receive the plain text lead summary from Step C.
- Verify that all six fields are present and traceable to the summary:
  name, current_company, current_role, skills, interests, university.
- For each field, ask internally:
  "Does this value appear explicitly in the C3 summary â€” or was it inferred?"
- If all fields are present and traceable: output status VALID.
- If any field contains values not present in the C3 summary: output status CORRUPTED
  and list the affected fields in failed_fields.
- If any field is missing or empty: output status INCOMPLETE
  and list the affected fields in failed_fields.
- Do NOT attempt to fix or fill missing fields.
- Do NOT pass judgment on relevance or message quality.
- Output routing decision only.
```

#### Module 2: C2 Critic â€” Relevance Precision & Inflation Control

This node addresses a major systemic failure: Judge over-assigns High relevance (low precision threshold).

**Purpose**

Ensure that:

- â€œHighâ€ tier is rare and earned

- Multi-signal alignment is required

- Relevance tiers are granular and ranked

- Flat inflation does not occur

Prevents:

- Everyone marked High

- Weak profiles elevated

- Loss of prioritization power

- Human time wasted reviewing low-value leads

**Input Variable**

{relevance_verdict_xml}

Specifically:

- <thinking> (reasoning per lead)

- <verdict> (High / Medium / Low per lead)

**Output Categories**

Returns:

- VALID

- REVISE_INFLATION (too many Highs)

- REVISE_WEAK_HIGH (High assigned without strong evidence)

- REVISE_FLAT_TIERS (no differentiation between leads)

**Evaluation Rubric (Derived from SCRATCH_PAD)**
Rule 1 â€” High Requires Multi-Signal Alignment

- A lead may only be marked High if at least TWO of the following are strongly aligned:

- Same company (primary anchor)

- Strong role similarity

- Direct skill overlap (core competencies, not tools)

- Clear industry match

- If only one weak signal â†’ cannot be High.

Rule 2 â€” High Tier Scarcity Constraint

- If more than ~30â€“40% of leads are labeled High â†’ reject.

- The system must behave like a prioritization engine, not a validation engine.

Rule 3 â€” Core Competency > Tools

If a High verdict is justified primarily by:

- Tool stack overlap

- Generic AI buzzwords

- Reject as weak High.

Rule 4 â€” Explicit Reasoning

If <thinking> lacks:

- Explicit alignment mapping

- Explicit gap acknowledgment

- Reject as lazy classification.
  

---

### 3.5 Advanced Simulation Log (Proof of Robustness)
*Provide a chat log showing the Logic handling a complex case.*

**Scenario: The Edge Case**
*   **Input:** 
  ```
  
  ```
*   **Trace:**
  ```
  *
  ```
* **Observations from Simulation**
  * 

### 3.6 Claude logs:
#### https://claude.ai/share/6cbc5360-62ad-41d2-ae1e-b333838db0aa
#### https://claude.ai/share/130e5ea6-54e9-4304-bae9-15071cf22a2d
